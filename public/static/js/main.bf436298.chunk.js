(this["webpackJsonpproject-management-06-client"]=this["webpackJsonpproject-management-06-client"]||[]).push([[0],{36:function(e,t,n){e.exports=n(65)},41:function(e,t,n){},42:function(e,t,n){},65:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(31),l=n.n(s),i=(n(41),n(2)),o=n(3),c=n(5),u=n(4),h=n(1),m=n(6),p=(n(42),n(16)),d=n(8),g=n(9),b=n.n(g),j=function(){function e(){Object(i.a)(this,e),this.service=b.a.create({baseURL:"https://ih-project-management-06.herokuapp.com/api",withCredentials:!0})}return Object(o.a)(e,[{key:"signup",value:function(e,t){return this.service.post("/signup",{username:e,password:t}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.service.post("/login",{username:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.service.get("/logout").then((function(e){return e.data}))}},{key:"loggedin",value:function(){return this.service.get("/loggedin").then((function(e){return e.data}))}}]),e}(),v=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:null},n.service=new j,n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.userInSession!==e.userInSession&&this.setState({loggedInUser:this.props.userInSession})}},{key:"logoutUser",value:function(){var e=this;this.service.logout().then((function(){e.setState({loggedInUser:null}),e.props.getUser(null)})).catch((function(e){return console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"nav-style"},this.state.loggedInUser?r.a.createElement("ul",null,r.a.createElement("li",null,"Welcome, ",this.state.loggedInUser.username),r.a.createElement("li",null,r.a.createElement(d.c,{activeStyle:{color:"red"},to:"/projects",style:{textDecoration:"none"}},"Projects")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/"},r.a.createElement("button",{onClick:function(){return e.logoutUser()}},"Logout")))):r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(d.c,{to:"/",style:{textDecoration:"none"}},"Login")),r.a.createElement("li",null,r.a.createElement(d.c,{to:"/signup",style:{textDecoration:"none"}},"Signup"))))}}]),t}(a.Component),f=n(12),E=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:""},n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.title,a=this.state.description;b.a.post("https://ih-project-management-06.herokuapp.com/api/projects",{title:n,description:a},{withCredentials:!0}).then((function(){t.props.getData(),t.setState({title:"",description:""})})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(f.a)({},n,a))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Title:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{name:"description",value:this.state.description,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(a.Component),k=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).state={listOfProjects:[]},e.getAllProjects=e.getAllProjects.bind(Object(h.a)(e)),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"getAllProjects",value:function(){var e=this;b.a.get("".concat("https://ih-project-management-06.herokuapp.com/api","/projects")).then((function(t){e.setState({listOfProjects:t.data})}))}},{key:"componentDidMount",value:function(){this.getAllProjects()}},{key:"deleteProject",value:function(e){var t=this;b.a.delete("".concat("https://ih-project-management-06.herokuapp.com/api","/projects/").concat(e),{withCredentials:!0}).then((function(){t.getAllProjects()})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"60%",float:"left"}},this.state.listOfProjects.map((function(t){return r.a.createElement("div",{id:t._id,key:t._id},r.a.createElement(d.b,{to:"/projects/".concat(t._id)},r.a.createElement("h3",null,t.title)),r.a.createElement("ul",null,t.tasks.map((function(e,t){return r.a.createElement("li",{key:t},e.title)}))),e.props.loggedInUser&&e.props.loggedInUser._id===t.owner&&r.a.createElement("button",{onClick:function(){return e.deleteProject(t._id)}},"Delete project"))}))),r.a.createElement("div",{style:{width:"40%",float:"right"}},r.a.createElement(E,{getData:this.getAllProjects})," "))}}]),t}(a.Component),O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:n.props.theProject.title,description:n.props.theProject.description},n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this,n=this.state.title,a=this.state.description;e.preventDefault(),b.a.put("".concat("https://ih-project-management-06.herokuapp.com/api","/projects/").concat(this.props.theProject._id),{title:n,description:a},{withCredentials:!0}).then((function(){t.props.getTheProject(),t.props.history.push("/projects")})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.name;this.setState(Object(f.a)({},a,n))}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("h3",null,"Edit form"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Title:"),r.a.createElement("br",null),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("label",null,"Description:"),r.a.createElement("br",null),r.a.createElement("textarea",{name:"description",value:this.state.description,onChange:this.handleChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"submit",value:"Submit"})))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={title:"",description:"",isShowing:!1},n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n.toggleForm=n.toggleForm.bind(Object(h.a)(n)),n.showAddTaskForm=n.showAddTaskForm.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.title,a=this.state.description,r=this.props.theProject._id;b.a.post("https://ih-project-management-06.herokuapp.com/api/tasks",{title:n,description:a,projectID:r}).then((function(){t.props.getTheProject(),t.setState({title:"",description:""})})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(f.a)({},n,a))}},{key:"toggleForm",value:function(){this.setState({isShowing:!this.state.isShowing})}},{key:"showAddTaskForm",value:function(){var e=this;if(this.state.isShowing)return r.a.createElement("div",null,r.a.createElement("h3",null,"Add Task"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Title:"),r.a.createElement("input",{type:"text",name:"title",value:this.state.title,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("label",null,"Description:"),r.a.createElement("textarea",{name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Submit"})))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("hr",null),r.a.createElement("button",{onClick:function(){return e.toggleForm()}}," Add task "),this.showAddTaskForm())}}]),t}(a.Component),S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).ownershipCheck=function(e){if(n.props.loggedInUser&&e.owner===n.props.loggedInUser._id)return r.a.createElement("div",null,r.a.createElement("div",null,n.renderEditForm()," "),r.a.createElement("button",{onClick:function(){return n.deleteProject(n.state._id)}},"Delete project"))},n.state={},n.getSingleProject=n.getSingleProject.bind(Object(h.a)(n)),n.deleteProject=n.deleteProject.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getSingleProject()}},{key:"getSingleProject",value:function(){var e=this,t=this.props.match.params;b.a.get("".concat("https://ih-project-management-06.herokuapp.com/api","/projects/").concat(t.id),{withCredentials:!0}).then((function(t){var n=t.data;console.log(n),e.setState(n)})).catch((function(e){console.log(e)}))}},{key:"renderEditForm",value:function(){if(this.state.title)return r.a.createElement(O,Object.assign({theProject:this.state,getTheProject:this.getSingleProject},this.props));this.getSingleProject()}},{key:"deleteProject",value:function(){var e=this,t=this.props.match.params;b.a.delete("".concat("https://ih-project-management-06.herokuapp.com/api","/projects/").concat(t.id),{withCredentials:!0}).then((function(){e.props.history.push("/projects")})).catch((function(e){console.log(e)}))}},{key:"renderAddTaskForm",value:function(){if(this.state.title)return r.a.createElement(y,{theProject:this.state,getTheProject:this.getSingleProject});this.getSingleProject()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h1",null," ",this.state.title," ")," ",r.a.createElement("p",null," ",this.state.description," ")," "," ",this.state.tasks&&this.state.tasks.length>0&&r.a.createElement("h3",null," Tasks ")," "," ",this.state.tasks&&this.state.tasks.map((function(t,n){return r.a.createElement("div",{key:n}," "," ",r.a.createElement(d.b,{to:"/projects/".concat(e.state._id,"/tasks/").concat(t._id)}," ",t.title," ")," ")}))," ",r.a.createElement("div",null,this.ownershipCheck(this.state)),r.a.createElement("br",null),r.a.createElement("div",null," ",this.renderAddTaskForm()," ")," ",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(d.b,{to:"/projects"}," Back to projects ")," ")}}]),t}(a.Component),C=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={},n.getTheTask=n.getTheTask.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.getTheTask()}},{key:"getTheTask",value:function(){var e=this,t=this.props.match.params;b.a.get("".concat("https://ih-project-management-06.herokuapp.com/api","/projects/").concat(t.id,"/tasks/").concat(t.taskId)).then((function(t){var n=t.data;e.setState(n)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,this.state.title),r.a.createElement("p",null,this.state.description))}}]),t}(a.Component),w=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:"",message:""},n.service=new j,n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.username,a=this.state.password;this.service.signup(n,a).then((function(e){t.setState({username:"",password:""}),t.props.getUser(e),t.props.history.push("/projects")})).catch((function(e){t.setState({message:e.response.data.message})}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(f.a)({},n,a))}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Signup"})),this.state.message&&r.a.createElement("p",null,this.state.message),r.a.createElement("p",null,"Already have account?",r.a.createElement(d.b,{to:"/"}," Login")))}}]),t}(a.Component),U=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",password:""},n.service=new j,n.handleFormSubmit=n.handleFormSubmit.bind(Object(h.a)(n)),n.handleChange=n.handleChange.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=this.state.username,a=this.state.password;this.service.login(n,a).then((function(e){var n=t.props.location;t.setState({username:"",password:""}),t.props.getUser(e),n.state?t.props.history.push(n.state.from.pathname):t.props.history.push("/projects")})).catch((function(e){return console.log(e)}))}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(f.a)({},n,a))}},{key:"render",value:function(){return console.log(this.props),r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement("input",{type:"submit",value:"Login"})),r.a.createElement("p",null,"Don't have account?",r.a.createElement(d.b,{to:"/signup"}," Signup")))}}]),t}(a.Component),P=n(34),I=n(35),F=function(e){var t=e.component,n=e.user,a=Object(I.a)(e,["component","user"]);return console.log(Object(P.a)({component:t,user:n},a)),r.a.createElement(p.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,Object.assign({},e,{loggedInUser:n})):r.a.createElement(p.a,{to:{pathname:"/",state:{from:e.location}}})}}))},T=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loggedInUser:null},n.service=new j,n.getTheUser=n.getTheUser.bind(Object(h.a)(n)),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then((function(t){e.setState({loggedInUser:t})})).catch((function(t){e.setState({loggedInUser:!1})}))}},{key:"getTheUser",value:function(e){this.setState({loggedInUser:e})}},{key:"render",value:function(){var e=this;return this.fetchUser(),r.a.createElement("div",{className:"App"},r.a.createElement(v,{userInSession:this.state.loggedInUser,getUser:this.getTheUser}),this.state.loggedInUser?r.a.createElement(p.d,null,r.a.createElement(F,{exact:!0,path:"/projects",user:this.state.loggedInUser,component:k}),r.a.createElement(F,{exact:!0,path:"/projects/:id",user:this.state.loggedInUser,component:S}),")} />",r.a.createElement(F,{exact:!0,path:"/projects/:id/tasks/:taskId",user:this.state.loggedInUser,component:C})):r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/signup",user:this.state.loggedInUser,render:function(t){return r.a.createElement(w,Object.assign({getUser:e.getTheUser},t))}}),r.a.createElement(p.b,{exact:!0,path:"/",user:this.state.loggedInUser,render:function(t){return r.a.createElement(U,Object.assign({getUser:e.getTheUser},t))}}),r.a.createElement(F,{exact:!0,path:"/projects",component:k}),r.a.createElement(F,{exact:!0,path:"/projects/:id",user:this.state.loggedInUser,component:S}),r.a.createElement(F,{exact:!0,path:"/projects/:id/tasks/:taskId",user:this.state.loggedInUser,component:C})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(d.a,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[36,1,2]]]);
//# sourceMappingURL=main.bf436298.chunk.js.map